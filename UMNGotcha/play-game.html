<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="status-bar">
        <div class="status-label">Makan</div>
        <div class="status-meter">
            <div class="status-fill" id="status-makan"></div>
        </div>
        <div class="status-label">Tidur</div>
        <div class="status-meter">
            <div class="status-fill" id="status-tidur"></div>
        </div>
        <div class="status-label">Main</div>
        <div class="status-meter">
            <div class="status-fill" id="status-main"></div>
        </div>
        <div class="status-label">Kesehatan</div>
        <div class="status-meter">
            <div class="status-fill" id="status-kesehatan"></div>
        </div>
        <div class="level-label">Level <span id="level">1</span></div>
    </div>
    <div class="greeting">Good Morning </div>
    <div class="clock">12:00 AM</div>
    <img src="avatar1.png" alt="Avatar" class="avatar" id="avatar">
    <div class="activity-buttons">
        <button onclick="main()" class="activity-button" id="main">Main</button>
        <button onclick="makan()" class="activity-button" id="makan">Makan</button>
        <button onclick="tidur()" class="activity-button" id="tidur">Tidur</button>
        <button onclick="kesehatan()" class="activity-button" id="kesehatan">Obat</button>
    <div class="game-container">
        <div id="food-a">
            <H1>A</H1>
        </div>
        <div id="food-b">
            <H1>B</H1>
        </div>
        <div id="food-c">
            <H1>C</H1>
        </div>
        <div id="character-wrapper">
            <img src="gambar/avatar1.jpg"/>
        </div>
        <div class="console-wrapper">
            <div class="console-box">
                <div class="console" onclick="handleMovement('up')">
                    <h1>UP</h1>
                </div>
            </div>

            <div class="console-mid">
                <div class="console" onclick="handleMovement('left')">
                    <h1>LEFT</h1>
    
                </div>
                <div class="console" onclick="handleMovement('right')">
                    <h1>RIGHT</h1>
                </div>
            </div>
            <div class="console-box">
                <div class="console" onclick="handleMovement('down')">
                    <h1>DOWN</h1>
                </div>
            </div>
        </div>

    </div>

</body>

<script>
    //progress makan
    // let barMakan = document.getElementById("status-makan")
    // let progress = 10
    // let interval = setInterval(makan, 10000) // 10000 Milisekon
    function makan(){
         //Progress = 25 + 25 = 50 > 100, Set var progress = 100 agar tidak lebih dari 100
        window.location.href = "umngotcha.html"
        if (progress > 100){ // Gak ngelebihin seratus
            progress = 100; // set progress
            barMakan.style.width = progress +'%' // update status
            clearInterval(interval);
            }else{
            barMakan.style.width = progress +'%'
            progress += 10 // Setiap klik tambah 10% progress
        }
    }
    //progress tidur
    // let barTidur = document.getElementById("status-tidur")
    // let progress1 = 10
    // let interval1 = setInterval(tidur, 10000) // 10000 Milisekon
    function tidur(){
        // Progress = 90 + 25 = 115 > 100, Set var progress = 100 agar tidak lebih dari 100
        window.location.href = "umngotcha.html"
        if (progress1 > 100){ // Gak ngelebihin seratus
            progress1 = 100; // set progress
            barTidur.style.width = progress1 +'%' // update status
            clearInterval(interval);
        }else{
            barTidur.style.width = progress1 +'%'
            progress1 += 10 // Setiap klik tambah 10% progress
        }
    }
    //progress main
    let barMain = document.getElementById("status-main")
    let progress2 = 10
    // let interval2 = setInterval(main, 10000) // 10000 Milisekon
    console.log(window.location)
    function main(){
        if(window.location === "/UMNGotcha/umngotcha.html"){
            window.location.href = "play-game.html"
        }
        
        // Progress = 90 + 25 = 115 > 100, Set var progress = 100 agar tidak lebih dari 100
        if (progress2 > 100){ // Gak ngelebihin seratus
            progress2 = 100; // set progress
            barMain.style.width = progress2 +'%' // update status
            // clearInterval(interval);
        }else{
            barMain.style.width = progress2 +'%'
            progress2 += 10 // Setiap klik tambah 10% progress
        }
    }
    //progress kesehatan
    // let barKesehatan = document.getElementById("status-kesehatan")
    // let progress3 = 10
    // let interval3 = setInterval(kesehatan, 10000) // 10000 Milisekon
    function kesehatan(){
        // Progress = 90 + 25 = 115 > 100, Set var progress = 100 agar tidak lebih dari 100
        window.location.href = "umngotcha.html"
        if (progress3 > 100){ // Gak ngelebihin seratus
            progress3 = 100; // set progress
            barKesehatan.style.width = progress3 +'%' // update status
            clearInterval(interval);
        }else{
            barKesehatan.style.width = progress3 +'%'
            progress3 += 10 // Setiap klik tambah 10% progress
        }
    }
    let bottom = 80;
    let right = 500;
    let character = document.getElementById("character-wrapper")
    const positionA = [100, 300]
    const positionB = [200, 200]
    const positionC = [250, 120]

    document.addEventListener('keyup', function(e) {
        if(bottom === 80 && right === 180){
            progress2 = 100; // set progress
            barMain.style.width = progress2 +'%' // update status
                let foodA = document.getElementById("food-a")
                foodA.style.display = "none"
                main()
            }else if(bottom === 200 && right === 200){
                main()
                let foodB = document.getElementById("food-b")
                foodB.style.display = "none"
            }else if (bottom === 240 && right === 120){
                main()
                let foodC = document.getElementById("food-c")
                foodC.style.display = "none"
            }
        switch(e.keyCode){
            //up
            case 38:
                if(bottom >= 300){
                    return;
                }
            character.style.bottom = String(bottom + 20) + "px"
            bottom = bottom + 20
                break;
            //down
            case 40:
                if(bottom <= 0){
                    return;
                }
            character.style.bottom = String(bottom - 20) + "px"
            bottom = bottom - 20
                break;
            //right
            case 39:
            if(right <= 0){
                    return;
                }
            character.style.right = String(right - 20) + "px"
            right = right - 20
                break;
            //left
            case 37:
            console.log(String(right + 20) + "px")
            if(right >= 760){
                    return;
                }
            character.style.right = String(right + 20) + "px"
            right = right + 20
                break;
        }
});

function handleMovement(type){
    if(bottom === 80 && right === 180){
            progress2 = 100; // set progress
            barMain.style.width = progress2 +'%' // update status
                let foodA = document.getElementById("food-a")
                foodA.style.display = "none"
                main()
            }else if(bottom === 200 && right === 200){
                main()
                let foodB = document.getElementById("food-b")
                foodB.style.display = "none"
            }else if (bottom === 240 && right === 120){
                main()
                let foodC = document.getElementById("food-c")
                foodC.style.display = "none"
            }
        switch(type){
            //up
            case "up":
                if(bottom >= 300){
                    return;
                }
            character.style.bottom = String(bottom + 20) + "px"
            bottom = bottom + 20
                break;
            //down
            case "down":
                if(bottom <= 0){
                    return;
                }
            character.style.bottom = String(bottom - 20) + "px"
            bottom = bottom - 20
                break;
            //right
            case "right":
            if(right <= 0){
                    return;
                }
            character.style.right = String(right - 20) + "px"
            right = right - 20
                break;
            //left
            case "left":
            console.log(String(right + 20) + "px")
            if(right >= 760){
                    return;
                }
            character.style.right = String(right + 20) + "px"
            right = right + 20
                break;
        }
}
    </script>
</html>